FORGEAI - HOW FILES CONNECT
============================
This shows how each file talks to other files.


THE STARTUP FLOW
----------------
When you run ForgeAI, here's what happens:

    run.py
        |
        +-- If --train --> training.py --> model.py + tokenizer.py
        |
        +-- If --gui ----> enhanced_window.py --> inference.py --> model.py
        |
        +-- If --serve --> api_server.py --> inference.py --> model.py


THE BRAIN (core/)
-----------------
How the AI files connect:

    model.py (the neural network)
        |
        +-- Used by: training.py (to train it)
        +-- Used by: inference.py (to generate text)
        +-- Used by: model_registry.py (to manage multiple models)

    tokenizer.py (text to numbers)
        |
        +-- Used by: training.py
        +-- Used by: inference.py

    inference.py (text generation)
        |
        +-- Uses: model.py
        +-- Uses: tokenizer.py
        +-- Uses: tool_router.py
        +-- Used by: chat_tab.py
        +-- Used by: api_server.py

    tool_router.py (decides which tool to use)
        |
        +-- Uses: tokenizer.py
        +-- Routes to: image_tab.py, code_tab.py, video_tab.py, etc.


THE GUI (gui/)
--------------
How the interface connects:

    enhanced_window.py (main window)
        |
        +-- Contains: All tabs
        +-- Uses: inference.py (for AI responses)

    chat_tab.py
        |
        +-- Uses: inference.py (to get responses)
        +-- Uses: memory/manager.py (to save chats)
        +-- Uses: voice/ (optional TTS)

    image_tab.py
        |
        +-- Contains: StableDiffusionLocal (local generation)
        +-- Contains: OpenAIImage, ReplicateImage (cloud generation)
        +-- Uses: builtin/ (fallback if no GPU)

    modules_tab.py
        |
        +-- Uses: modules/manager.py (to toggle modules)


MEMORY (memory/)
----------------
How conversations are saved:

    manager.py (ConversationManager)
        |
        +-- Saves to: data/conversations/*.json
        +-- Uses: vector_db.py (for semantic search)

    vector_db.py
        |
        +-- Uses: embeddings.py (to convert text to vectors)


MODULES (modules/)
------------------
How the module system works:

    manager.py (ModuleManager)
        |
        +-- Reads: registry.py (list of all modules)
        +-- Saves to: data/module_config.json
        +-- Used by: modules_tab.py (GUI toggle)

    registry.py (module definitions)
        |
        +-- Defines: ModelModule --> wraps model.py
        +-- Defines: TokenizerModule --> wraps tokenizer.py
        +-- Defines: ImageGenLocalModule --> wraps image_tab.py
        +-- Defines: All other modules...


AVATAR (avatar/)
----------------
How the avatar connects:

    controller.py (AvatarController)
        |
        +-- Uses: animation_system.py (movement)
        +-- Uses: lip_sync.py (mouth movement)
        +-- Used by: avatar_tab.py

    autonomous.py (self-acting avatar)
        |
        +-- Uses: controller.py
        +-- Watches: screen content
        +-- Changes: mood based on what it sees


NETWORKING (comms/)
-------------------
How networking works:

    api_server.py (REST API)
        |
        +-- Uses: inference.py
        +-- Exposes: /health, /generate endpoints

    network.py (multi-device)
        |
        +-- Uses: model.py (to share models)
        +-- Uses: discovery.py (to find other devices)


VOICE (voice/)
--------------
How speech works:

    voice_generator.py
        |
        +-- Uses: voice_profile.py (settings)
        +-- Uses: personality.py (affects voice)
        +-- Used by: audio_tab.py

    listener.py (speech-to-text)
        |
        +-- Outputs to: chat_tab.py


COMPLETE DATA FLOW
------------------
What happens when you send a message:

    1. You type in chat_tab.py
    2. Message goes to tool_router.py
    3. Router decides: "Is this a tool request or chat?"
    
    If CHAT:
        4. Goes to tokenizer.py (text --> numbers)
        5. Goes to model.py (process)
        6. Goes to inference.py (generate response)
        7. Goes to tokenizer.py (numbers --> text)
        8. Goes back to chat_tab.py (display)
    
    If TOOL (like "draw a cat"):
        4. Goes to tool_executor.py
        5. Goes to the right tool (image_tab.py)
        6. Tool generates result
        7. Result goes back to chat_tab.py


SUMMARY: KEY CONNECTIONS
------------------------
    run.py ---------> Everything starts here
    model.py -------> The AI brain, used by training and inference
    inference.py ---> Generates text, used by GUI and API
    tokenizer.py ---> Text/numbers, used everywhere
    tool_router.py -> Routes requests to the right place
    manager.py -----> Loads/unloads modules
    registry.py ----> Defines all available modules
